<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>Behzad&#x27;s Techlogs | Code, Minig, Server</title>

  
  <link rel="alternate"
    type="application/atom+xml"
    title="RSS" href="https://airoweb.com/atom.xml">
  

  
  <link rel="stylesheet" href="https://airoweb.com/site.css">
  

  
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-5384911-16"></script>
  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());

    gtag('config', 'UA-5384911-16');
  </script>

  
</head>

<body class="hack dark main container">
  
    
        
  
  <header>
    <nav itemscope itemtype="http://schema.org/SiteNavigationElement">
      
      <a itemprop="url"
        class=""
        href="https:&#x2F;&#x2F;airoweb.com">
        <span itemprop="name">Home
        </span></a>
      
      <a itemprop="url"
        class=""
        href="https:&#x2F;&#x2F;airoweb.com&#x2F;categories">
        <span itemprop="name">Categories
        </span></a>
      
      <a itemprop="url"
        class=""
        href="https:&#x2F;&#x2F;airoweb.com&#x2F;tags">
        <span itemprop="name">Tags
        </span></a>
      
      <a itemprop="url"
        class=""
        href="https:&#x2F;&#x2F;braiins-os.com?utm_source=airoweb">
        <span itemprop="name">Braiins OS+
        </span></a>
      
    </nav>
  </header>
  
  
    

<article itemscope itemtype="http://schema.org/BlogPosting">
    <header>
        <h1 itemprop="headline">Auto reload cgminer if it is lower than 10Th&#x2F;s</h1>
        <span class="muted">
    <svg style="margin-bottom:-3px" class="i-clock" viewBox="0 0 32 32"
         width="16" height="16" fill="none" stroke="currentcolor"
         stroke-linecap="round" stroke-linejoin="round" stroke-width="6.25%">
        <circle cx="16" cy="16" r="14"/>
        <path d="M16 8 L16 16 20 20"/>
    </svg>
    <span>1 minute read</span>
    <svg style="margin-bottom: -3px" class="i-edit" viewBox="0 0 32 32"
         width="16" height="16" fill="none" stroke="currentcolor"
         stroke-linecap="round" stroke-linejoin="round" stroke-width="6.25%">
        <path d="M30 7 L25 2 5 22 3 29 10 27 Z M21 6 L26 11 Z M5 22 L10 27 Z"/>
    </svg>

    Published: 2019-10-12
</span>
    </header>
    <div itemprop="articleBody">
      <p>Use this bash script to auto reload cgminer when hash rate is lower than 10TH/s:</p>
<span id="continue-reading"></span><pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#65737e;">#!/usr/bin/env bash
</span><span style="color:#bf616a;">rm</span><span> output.txt |
</span><span>`</span><span style="color:#96b5b4;">echo </span><span>&#39;</span><span style="color:#a3be8c;">{&quot;command&quot;:&quot;stats&quot;}</span><span>&#39; | </span><span style="color:#bf616a;">nc</span><span> 127.0.0.1 4028 &gt;&gt; output.txt` |
</span><span>
</span><span style="color:#bf616a;">hash_rate</span><span>=$</span><span style="color:#a3be8c;">(</span><span style="color:#bf616a;">awk -v</span><span style="color:#a3be8c;"> tag=</span><span>&#39;</span><span style="color:#a3be8c;">GHS av</span><span>&#39; &#39;</span><span style="color:#a3be8c;">match($0,&quot;\&quot;&quot;tag&quot;\&quot;: *(\&quot;[^\&quot;]*|[0-9]+)&quot;) { val=substr($0,RSTART,RLENGTH); sub(/^&quot;[^&quot;]+&quot;: *&quot;?/,&quot;&quot;,val); print val }</span><span>&#39;</span><span style="color:#a3be8c;"> output.txt) </span><span>|
</span><span style="color:#bf616a;">epoch</span><span>=$</span><span style="color:#a3be8c;">(</span><span style="color:#bf616a;">date</span><span style="color:#a3be8c;"> +</span><span>%</span><span style="color:#bf616a;">s</span><span style="color:#a3be8c;">) </span><span>|
</span><span style="color:#b48ead;">if </span><span style="color:#96b5b4;">[</span><span> 10000 &gt; hash_rate </span><span style="color:#96b5b4;">]</span><span>;  </span><span style="color:#b48ead;">then 
</span><span>	</span><span style="color:#bf616a;">/etc/init.d/cgminer</span><span> reload
</span><span style="color:#b48ead;">fi
</span></code></pre>

    </div>

    
        <footer>
            <hr>
            <p>
                
                    Published by Behzad
                
                
                    
                    in <a href="https://airoweb.com/categories/mining/">Mining</a>
                
                
                    and tagged
                    
                        <a href="https://airoweb.com/tags/cgminer/">cgminer</a>
                        
                    
                
            </p>
            
            
        </footer>
    
</article>


</body>

</html>
